<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×‘×™×¨ ×œ×¡×•×›×Ÿ...</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #0a0a2e 0%, #1a1a4e 30%, #2d1b69 60%, #1a0a3e 100%);
            color: #fff; direction: rtl;
        }
        .card {
            background: rgba(255,255,255,0.06);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 24px; padding: 50px 35px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
            text-align: center; max-width: 420px; width: 90%;
        }
        .emoji { font-size: 56px; margin-bottom: 16px; }
        .name {
            font-size: 26px; font-weight: 700; margin-bottom: 6px;
            background: linear-gradient(90deg, #a78bfa, #818cf8, #6366f1);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }
        .subtitle { font-size: 16px; color: rgba(255,255,255,0.5); margin-bottom: 30px; }
        .spinner {
            width: 50px; height: 50px;
            border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid #818cf8;
            border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .status { font-size: 17px; color: rgba(255,255,255,0.7); animation: pulse 1.5s ease-in-out infinite; }
        @keyframes pulse { 0%,100% { opacity: 0.5; } 50% { opacity: 1; } }
        .btn {
            display: none; margin-top: 20px; padding: 15px 36px; font-size: 17px;
            font-weight: 600; color: #fff;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none; border-radius: 14px; cursor: pointer;
            box-shadow: 0 8px 25px rgba(99,102,241,0.4);
            font-family: inherit; width: 80%;
        }
        .btn:active { transform: scale(0.97); }
        .btn.show { display: inline-block; }
        .btn-secondary {
            display: none; margin-top: 12px; padding: 13px 30px; font-size: 15px;
            font-weight: 500; color: #a78bfa;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(167,139,250,0.3);
            border-radius: 12px; cursor: pointer; font-family: inherit; width: 80%;
        }
        .btn-secondary:active { transform: scale(0.97); }
        .btn-secondary.show { display: inline-block; }
        .tip { display: none; margin-top: 18px; font-size: 13px; color: rgba(255,255,255,0.35); line-height: 1.6; }
        .tip.show { display: block; }
        .error { color: #f87171; }
    </style>
</head>
<body>
    <div class="card">
        <div id="main">
            <div class="emoji" id="emoji">ğŸ¤–</div>
            <div class="name" id="name">×¡×•×›×Ÿ AI</div>
            <div class="subtitle" id="subtitle"></div>
            <div class="spinner" id="spinner"></div>
            <div class="status" id="status">...×¤×•×ª×— ××ª ×”×¡×•×›×Ÿ</div>
            <button class="btn" id="btn1" onclick="openInApp()">ğŸš€ ×¤×ª×— ×‘××¤×œ×™×§×¦×™×™×ª Gemini</button>
            <button class="btn-secondary" id="btn2" onclick="openInBrowser()">ğŸŒ ×¤×ª×— ×‘×“×¤×“×¤×Ÿ</button>
            <button class="btn-secondary" id="btn3" onclick="openStore()">ğŸ“² ×”×ª×§×Ÿ ××ª Gemini</button>
            <div class="tip" id="tip"></div>
        </div>
        <div id="err" style="display:none">
            <div class="emoji">ğŸ˜•</div>
            <div class="name error">×¡×•×›×Ÿ ×œ× × ××¦×</div>
            <div class="subtitle">×‘×“×•×§ ××ª ×”×§×™×©×•×¨ ×©×§×™×‘×œ×ª ×•× ×¡×” ×©×•×‘</div>
        </div>
    </div>

    <script>
        // ============================================
        // AGENTS CONFIG
        // ============================================
        var AGENTS = {
            bio:       { name: "BioExpress",    subtitle: "×‘×™×• ×‘××”×™×¨×•×ª",              emoji: "âš¡", gem: "1eMUaHeB96TMO9AewHioYIz7prrniQcwa" },
            intro:     { name: "FirstImpact",   subtitle: "×¤×•×¡×˜ ×”×™×›×¨×•×ª",              emoji: "ğŸ’¥", gem: "1LinTmvBwOA9oPs4Sr5x76C49ejcpFULq" },
            groups:    { name: "GroupLink",      subtitle: "×—×™×‘×•×¨ ×œ×§×‘×•×¦×•×ª",            emoji: "ğŸ”—", gem: "1CUdYRdxB4Ehb6rPSR1D8NmUJzdL95p85" },
            friends:   { name: "NetHunter",     subtitle: "××™×ª×•×¨ ×—×‘×¨×™× ×¨×œ×•×•× ×˜×™×™×",    emoji: "ğŸ¯", gem: "1zYM8b94DnR1FfbQgXNU72ve5toAIv05B" },
            authority: { name: "AuthorityPost", subtitle: "×¤×•×¡×˜ ×‘×™×¡×•×¡ ××¢××“",          emoji: "ğŸ‘‘", gem: "1IGPtTugc5B9tBnWO4oHFgsq2ofhyaUC3" },
            launch:    { name: "LaunchCraft",   subtitle: "× ×•×¡×— ×”×©×§×ª ×©×™×¨×•×ª",           emoji: "ğŸš€", gem: "8188d71c7ff1" },
            sales:     { name: "SalesCoach",    subtitle: "××™××•×Ÿ ××›×™×¨×•×ª",              emoji: "ğŸ’°", gem: "1i3p_RvRorZaALPg8yYjqv_r-McEGhcSW" }
        };

        var params = new URLSearchParams(window.location.search);
        var agent = AGENTS[params.get('agent')];

        if (!agent) {
            document.getElementById('main').style.display = 'none';
            document.getElementById('err').style.display = 'block';
        } else {
            document.getElementById('emoji').textContent = agent.emoji;
            document.getElementById('name').textContent = agent.name;
            document.getElementById('subtitle').textContent = agent.subtitle;
            document.title = agent.name + ' - ' + agent.subtitle;
            startRedirect();
        }

        function gemUrl() {
            return 'https://gemini.google.com/gem/' + agent.gem;
        }

        function isAndroid() { return /android/i.test(navigator.userAgent); }
        function isIOS() { return /iphone|ipad|ipod/i.test(navigator.userAgent); }

        function startRedirect() {
            if (isAndroid()) {
                // Android: intent with Google App package (verified handler for gemini.google.com)
                // NO browser_fallback_url - so Chrome won't silently fall back to browser
                // If package not found -> Chrome goes to Play Store for that package
                var intent = 'intent://gemini.google.com/gem/' + agent.gem +
                    '#Intent;' +
                    'scheme=https;' +
                    'package=com.google.android.googlequicksearchbox;' +
                    'end';

                setTimeout(function() {
                    window.location.href = intent;
                }, 400);

            } else if (isIOS()) {
                // iOS: direct navigation triggers Universal Links if app is installed
                setTimeout(function() {
                    window.location.href = gemUrl();
                }, 400);

            } else {
                window.location.href = gemUrl();
                return;
            }

            // Show buttons after 3 seconds as fallback
            setTimeout(showFallback, 3000);
        }

        function showFallback() {
            if (document.hidden) return;
            document.getElementById('spinner').style.display = 'none';
            document.getElementById('status').textContent = '×‘×—×¨ ××™×š ×œ×¤×ª×•×—:';
            document.getElementById('status').style.animation = 'none';
            document.getElementById('status').style.opacity = '0.8';
            document.getElementById('btn1').classList.add('show');
            document.getElementById('btn2').classList.add('show');
            document.getElementById('btn3').classList.add('show');
            document.getElementById('tip').innerHTML = 'ğŸ’¡ ×œ×—×•×•×™×” ×”×˜×•×‘×” ×‘×™×•×ª×¨, ×¤×ª×— ×‘××¤×œ×™×§×¦×™×™×ª Gemini';
            document.getElementById('tip').classList.add('show');
        }

        function openInApp() {
            if (isAndroid()) {
                // Try intent without fallback - forces app or Play Store
                var intent = 'intent://gemini.google.com/gem/' + agent.gem +
                    '#Intent;' +
                    'scheme=https;' +
                    'package=com.google.android.googlequicksearchbox;' +
                    'end';
                window.location.href = intent;
            } else {
                window.location.href = gemUrl();
            }
        }

        function openInBrowser() {
            window.location.href = gemUrl();
        }

        function openStore() {
            if (isAndroid()) {
                window.location.href = 'market://details?id=com.google.android.apps.bard';
            } else if (isIOS()) {
                window.location.href = 'https://apps.apple.com/app/google-gemini/id6477489129';
            } else {
                window.location.href = gemUrl();
            }
        }
    </script>
</body>
</html>
